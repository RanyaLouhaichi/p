<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
    </plugin-info>

    <!-- Resources -->
    <resource type="i18n" name="i18n" location="jurix-ai-plugin"/>
    
    <!-- Web Resources -->
    <web-resource key="jurix-ai-resources" name="JURIX AI Web Resources">
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        
        <resource type="download" name="jurix-ai.css" location="/css/jurix-ai.css"/>
        <resource type="download" name="dashboard.js" location="/js/dashboard.js"/>
        <resource type="download" name="chat-widget.js" location="/js/chat-widget.js"/>
        
        <context>atl.general</context>
    </web-resource>
    
    <!-- REST Module -->
    <rest key="jurix-rest" path="/jurix-api" version="1.0">
        <description>JURIX AI REST API</description>
    </rest>
    
    <!-- Servlet -->
    <servlet key="dashboard-servlet" name="Dashboard Servlet" 
             class="com.jurix.ai.servlet.DashboardServlet">
        <description>Serves the AI dashboard</description>
        <url-pattern>/jurix-dashboard</url-pattern>
    </servlet>
    
    <!-- Test Servlet -->
    <servlet key="test-servlet" class="com.jurix.ai.servlet.TestServlet">
        <url-pattern>/jurix-test</url-pattern>
    </servlet>
    
    <!-- Web Item for Project Navigation -->
    <web-item key="jurix-dashboard-link" name="AI Dashboard Link" 
              section="jira.project.sidebar.navigation" weight="30">
        <description>Link to AI Dashboard</description>
        <label key="jurix.dashboard.label">AI Analytics</label>
        <link linkId="jurix-dashboard-link">/jurix-dashboard?projectKey=$projectKey</link>
        <condition class="com.atlassian.jira.plugin.webfragment.conditions.UserLoggedInCondition"/>
    </web-item>
    
    <!-- Active Objects -->
    <ao key="ao-module">
        <description>Active Objects entities for JURIX AI</description>
        <entity>com.jurix.ai.ao.AIAnalytics</entity>
        <entity>com.jurix.ai.ao.Prediction</entity>
        <entity>com.jurix.ai.ao.GeneratedArticle</entity>
    </ao>
</atlassian-plugin>